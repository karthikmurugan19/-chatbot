@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

*{ margin:0; padding:0; box-sizing:border-box; font-family:"Inter",sans-serif; }

/* subtle white → light grey */
body{
  min-height:100vh;
  background: linear-gradient(135deg, #ffffff, #f5f5f5);
}

/* =============== SHELL (bubble + window) =============== */
#chat-shell{
  --w-closed: 64px;
  --h-closed: 64px;
  --w-open: 420px;
  --h-open: 560px;

  position: fixed;
  right: 20px;
  bottom: 20px;
  width: var(--w-closed);
  height: var(--h-closed);
  border-radius: 9999px;
  background: #ffffff;
  box-shadow: 0 18px 50px rgba(0,0,0,.18);
  overflow: hidden;
  z-index: 1000;

  /* smooth morph */
  transition:
    width .28s ease, height .28s ease, border-radius .28s ease,
    transform .22s ease, box-shadow .22s ease, opacity .2s ease;
}

/* OPEN → expands into chat */
#chat-shell.open{
  width: var(--w-open);
  height: var(--h-open);
  border-radius: 15px;
  bottom: 20px; right: 20px;
}

/* bubble logo */
#chat-shell .bubble-logo{
  position:absolute; inset:0;
  display:grid; place-items:center;
  cursor:pointer;
}
#chat-shell .bubble-logo::before{
  content: "";
  width: 28px; height: 28px; display:block;
  background: radial-gradient(circle at 50% 50%, #45B94E 0 55%, transparent 56%),
              radial-gradient(circle at 55% 35%, #005D2B 0 26%, transparent 27%);
  border-radius: 50%;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,.12));
}
#chat-shell.open .bubble-logo{ opacity:0; pointer-events:none; }

/* chat window container */
#chat-shell .chat-window{
  position:absolute; inset:0;
  display:flex; flex-direction:column;
  opacity:0; pointer-events:none; /* hidden while closed */
  transition: opacity .24s ease .12s;
}
#chat-shell.open .chat-window{ opacity:1; pointer-events:auto; }

/* =============== HEADER =============== */
.chat-header{
  display:flex; align-items:center; justify-content:space-between;
  background:#005568; padding:12px 16px; color:#fff;
}
.header-info{ display:flex; gap:10px; align-items:center; }
.chatbot-logo{ height:36px; width:36px; padding:6px; background:#fff; border-radius:50%; }
.logo-text{ color:#fff; font-size:1.1rem; font-weight:600; }
#minimize-chat{
  border:none; color:#fff; height:36px; width:36px; font-size:1.7rem;
  cursor:pointer; border-radius:50%; background:none; transition:.2s;
}
#minimize-chat:hover{ background:#002a33; }

/* =============== BODY =============== */
.chat-body{
  padding:20px 18px; display:flex; gap:16px; height:calc(var(--h-open) - 128px);
  overflow-y:auto; flex-direction:column; scroll-behavior:smooth; background:#fff;
}
.message{ display:flex; gap:10px; align-items:flex-end; }
.message .message-text{ padding:10px 14px; max-width:75%; font-size:.95rem; white-space:pre-wrap; }

.bot-message .message-text{ background:#cfe1e5; border-radius:13px 13px 13px 3px; }
.user-message{ flex-direction:column; align-items:flex-end; }
.user-message .message-text{ color:#fff; background:#005568; border-radius:13px 13px 3px 13px; }

/* compact thinking indicator */
.thinking-indicator{ display:flex; gap:4px; padding:6px 0; align-items:center; }
.thinking-indicator .dot{
  width:6px; height:6px; border-radius:50%; background:#2a6e77; opacity:.9;
  animation: dotPulse 1.2s ease-in-out infinite;
}
.thinking-indicator .dot:nth-child(2){ animation-delay:.15s; }
.thinking-indicator .dot:nth-child(3){ animation-delay:.3s; }
@keyframes dotPulse{
  0%, 80%, 100% { transform: translateY(0); opacity:.6; }
  40% { transform: translateY(-4px); opacity:1; }
}

/* =============== FOOTER =============== */
.chat-footer{ background:#fff; padding:12px 16px 16px; border-top:1px solid #eee; }
.chat-form{
  display:flex; align-items:center; background:#fff; border-radius:32px; outline:1px solid #cccce5;
}
.chat-form:focus-within{ outline:2px solid #005568; }

.message-input{
  border:none; outline:none; height:44px; width:100%; resize:none;
  font-size:.95rem; padding:12px 0 11px 16px; border-radius:inherit;
}
.chat-contorls{
  display:flex; height:44px; gap:3px; align-items:center; align-self:flex-end; padding-right:6px;
}
.chat-contorls button{
  height:34px; width:34px; border:none; font-size:1.25rem; cursor:pointer;
  color:#005568; background:none; border-radius:50%; transition:.2s;
}
.chat-contorls button:hover{ background:#00556820; }
#send-message{ color:#fff; display:none; background:#005568; }
#send-message:hover{ background:#002a33; }

/* Show Send when text OR attachments exist */
.message-input:valid ~ .chat-contorls #send-message{ display:block; }
.chat-form.has-attachments .chat-contorls #send-message{ display:block; }

/* image preview thumbs */
.user-message .image-preview-wrap img{
  width:120px; height:120px; object-fit:cover; border-radius:12px; border:1px solid #e5e7eb;
}

/* Emoji Mart z-index */
.emoji-mart{ z-index: 2000; }
